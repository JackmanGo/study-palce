<import src="/pages/common/footer.wxml" />

<view wx:if="{{ !mapView }}">
  <view class="page__hd">
    <view class="page__title">历史打卡记录</view>
    <view class="page__desc">
      <p>这里将显示服务器上的所有打卡记录。</p>
    </view>
  </view>

  <view class="page__bd">

    <view wx:if="{{ !queryResult.length }}" style='margin: 25px 15px;'>您暂时还没有打卡记录哦，赶紧去打卡吧！</view>
    
    <view class="record-card" wx:for="{{ queryResult }}" wx:key="index" wx:for-item="item">
      <view class="record-header">
        <view class="record-title">打卡记录{{ index + 1 }}</view>
        <view class="record-time">{{ item.formatedDate }}</view>
      </view>
      
      <view class="record-content">
        <view class="record-address">
          <text class="address-label">地址：</text>
          <text class="address-text">{{ item.address }}</text>
        </view>
        
        <view class="record-image" wx:if="{{ item.imageUrl }}">
          <image src="{{ item.imageUrl }}" mode="aspectFill" class="checkin-image" bindtap="previewImage" data-url="{{ item.imageUrl }}"></image>
        </view>
        
        <view class="record-no-image" wx:else>
          <text>无图片</text>
        </view>
      </view>
    </view>

    <template is="footer" data="{{text: 'forbar'}}" />

  </view>
</view>

<view wx:if="{{ mapView }}" style='height: 100vh; '>
  <view class="map-placeholder">
    <text>地图功能需要位置信息支持</text>
  </view>
  <button class="weui-btn mini-btn" type="default" size="mini" bindtap='changeView' style="position: fixed; right: 10px; bottom: 10px; z-index: 10; margin: 0; width: auto;">返回列表</button>
</view>